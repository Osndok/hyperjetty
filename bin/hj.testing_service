#!/bin/bash

export CONTROL_PORT=5001
export LIB_DIRECTORY=/tmp/hyperjetty-$USER
export ETC_DIRECTORY=$LIB_DIRECTORY
export LOG_DIRECTORY=$LIB_DIRECTORY
export JETTY_RUNNER_JAR=lib/jetty-runner.jar

OPTIONS="-Dvisualvm.display.name=Jetty-Hypervisor"
OPTIONS="$OPTIONS -Xmx33m"
OPTIONS="$OPTIONS -XX:MaxPermSize=15m"

test -d $LIB_DIRECTORY || mkdir $LIB_DIRECTORY

exec java $OPTIONS -cp out/production/hyperjetty com.allogy.hyperjetty.Service "$@"

